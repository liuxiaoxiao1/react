<html>
  <head>
    <meta charset="utf-8" content="text/html;charset=utf-8">
  </head>
  <body>
    <script src="../../../build/node_modules/react/umd/react.development.js?t=2"></script>
    <script src="../../../build/node_modules/react-dom/umd/react-dom.development.js?t=2"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.js"></script>
    <div id="container"></div>
    <script type="text/babel">
      // import { unstable_batchedUpdates as batchedUpdates } from 'react-dom'
      let { unstable_batchedUpdates: batchedUpdates  } = ReactDOM
      class MyComponent extends React.Component {
        constructor(props) {
          super(props)
          this.state = {
            name: 'xiaoxiaoliu',
            password: '123131',
            test: 1
          }
        }
        componentDidMount () {
          // this.setState({
          //   name: 'wahaha'
          // })
          // 批量更新模式
          this.setData()
          // 非批量更新模式
          setTimeout(() => {
            // this.setData()
            // 手动调用 批量更新

            // batchedUpdates(() => {
            //   this.setData()
            // })
            // this.setData()
          })
        }
        setData () {
          this.setState({
            test: 2
          })
          this.setState({
            test: 3
          })
          this.setState({
            test: 4
          })
          console.log('this.state.test', this.state.test)
        }
        render () {
          const { name, password, test } = this.state
          return (
            <div>
              {name}, {password}
              <div>This:{test}</div>
            </div>
          )
        }

      }
      ReactDOM.render(
        <h1 xiaoxiao="66">
          Hello World! 66
          <div className="test-div"><div className="inner-txt">here we are</div></div>
          <MyComponent />
        </h1>,
        document.getElementById('container'), () => {
          console.log(33333)
        }
      );
    </script>
  </body>
</html>
